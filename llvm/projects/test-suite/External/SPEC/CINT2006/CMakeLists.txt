list(APPEND CPPFLAGS -DSPEC_CPU)

if(TARGET_OS STREQUAL "Darwin")
  list(APPEND CPPFLAGS -DSPEC_CPU_MACOSX)
elseif(TARGET_OS STREQUAL "Linux")
  list(APPEND CPPFLAGS -DSPEC_CPU_LINUX)
endif()

if(ARCH STREQUAL "x86")
  if(CMAKE_SIZEOF_VOID_P EQUAL 8)
    list(APPEND CPPFLAGS -DSPEC_CPU_X64)
  else()
    list(APPEND CPPFLAGS -DSPEC_CPU_IA32)
  endif()
endif()

include(TestBigEndian)
test_big_endian(IS_BIGENDIAN)
if(IS_BIGENDIAN)
  list(APPEND CPPFLAGS -DSPEC_CPU_BIGENDIAN)
else()
  list(APPEND CPPFLAGS -DSPEC_CPU_LITTLEENDIAN)
endif()

if(CMAKE_SIZEOF_VOID_P EQUAL 8)
  list(APPEND CPPFLAGS -DSPEC_CPU_LP64)
endif()

macro(cpu2006_subdir BENCHMARK)
  set(BENCHMARK_DIR ${TEST_SUITE_SPEC2006_ROOT}/benchspec/CPU2006/${BENCHMARK})
  set(PROG ${BENCHMARK})
  file(GLOB Source ${BENCHMARK_DIR}/src/*.c ${BENCHMARK_DIR}/src/*.cpp)
  add_subdirectory(${BENCHMARK})
endmacro()

cpu2006_subdir(400.perlbench)
cpu2006_subdir(401.bzip2)
cpu2006_subdir(403.gcc)
cpu2006_subdir(429.mcf)
cpu2006_subdir(445.gobmk)
cpu2006_subdir(456.hmmer)
cpu2006_subdir(458.sjeng)
cpu2006_subdir(462.libquantum)
cpu2006_subdir(464.h264ref)
cpu2006_subdir(471.omnetpp)
cpu2006_subdir(473.astar)
cpu2006_subdir(483.xalancbmk)
